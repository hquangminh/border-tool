{"ast":null,"code":"import React,{useState}from'react';import styled from'styled-components';import JSZip from'jszip';import{saveAs}from'file-saver';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[files,setFiles]=useState([]);const[borderColor,setBorderColor]=useState('#000000');const[borderWidth,setBorderWidth]=useState(5);const handleFileChange=event=>{const uploadedFiles=Array.from(event.target.files);setFiles(uploadedFiles);};const handleBorderColorChange=e=>{setBorderColor(e.target.value);};const handleBorderWidthChange=e=>{setBorderWidth(Number(e.target.value));};const handleDownloadZip=async()=>{const zip=new JSZip();const filePromises=files.map(file=>{if(file.type.startsWith('image')){return processImageFile(file,zip);}else if(file.type.startsWith('video')){return processVideoFile(file,zip);}});await Promise.all(filePromises);zip.generateAsync({type:'blob'}).then(content=>{saveAs(content,'files.zip');});};const processImageFile=(file,zip)=>{return new Promise(resolve=>{const canvas=document.createElement('canvas');const context=canvas.getContext('2d');const image=new Image();image.src=URL.createObjectURL(file);image.onload=()=>{canvas.width=image.width+2*borderWidth;canvas.height=image.height+2*borderWidth;context.fillStyle=borderColor;context.fillRect(0,0,canvas.width,canvas.height);context.drawImage(image,borderWidth,borderWidth);canvas.toBlob(blob=>{zip.file(file.name,blob);resolve();});};});};const processVideoFile=(file,zip)=>{return new Promise((resolve,reject)=>{const formData=new FormData();formData.append('video',file);axios.post('http://localhost:3000/upload',formData,{headers:{'Content-Type':'multipart/form-data'},responseType:'blob'}).then(response=>{const newFilename=`${file.name}_bordered.mp4`;const newBlob=new Blob([response.data],{type:'video/mp4'});zip.file(newFilename,newBlob);resolve();}).catch(error=>{console.error('Error uploading video:',error);reject(error);});});};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Title,{children:\"Border Tool for Images & Videos\"}),/*#__PURE__*/_jsxs(InputSection,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file-upload\",children:\"Upload Images/Videos:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file-upload\",onChange:handleFileChange,multiple:true,accept:\"image/*,video/*\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"border-color\",children:\"Border Color:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"color\",id:\"border-color\",value:borderColor,onChange:handleBorderColorChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"border-width\",children:\"Border Width (px):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"border-width\",value:borderWidth,onChange:handleBorderWidthChange})]}),/*#__PURE__*/_jsx(PreviewSection,{children:files.map((file,index)=>{if(file.type.startsWith('image')){return/*#__PURE__*/_jsx(ImagePreview,{children:/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(file),alt:file.name,style:{border:`${borderWidth}px solid ${borderColor}`}})},index);}else if(file.type.startsWith('video')){return/*#__PURE__*/_jsx(VideoPreview,{children:/*#__PURE__*/_jsx(\"video\",{src:URL.createObjectURL(file),controls:true,style:{border:`${borderWidth}px solid ${borderColor}`}})},index);}else{return null;}})}),/*#__PURE__*/_jsx(DownloadButton,{onClick:handleDownloadZip,children:\"Download All as ZIP\"})]});};export default App;// Styled components\nconst Container=styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  font-family: Arial, sans-serif;\n`;const Title=styled.h1`\n  font-size: 2em;\n  margin-bottom: 20px;\n`;const InputSection=styled.div`\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n\n  input {\n    padding: 5px;\n    font-size: 1em;\n  }\n`;const PreviewSection=styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-bottom: 20px;\n`;const ImagePreview=styled.div`\n  img {\n    max-width: 200px;\n    max-height: 200px;\n  }\n`;const VideoPreview=styled.div`\n  video {\n    max-width: 200px;\n    max-height: 200px;\n  }\n`;const DownloadButton=styled.button`\n  padding: 10px 20px;\n  font-size: 1.2em;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  cursor: pointer;\n  border-radius: 5px;\n\n  &:hover {\n    background-color: #0056b3;\n  }\n`;","map":{"version":3,"names":["React","useState","styled","JSZip","saveAs","axios","jsx","_jsx","jsxs","_jsxs","App","files","setFiles","borderColor","setBorderColor","borderWidth","setBorderWidth","handleFileChange","event","uploadedFiles","Array","from","target","handleBorderColorChange","e","value","handleBorderWidthChange","Number","handleDownloadZip","zip","filePromises","map","file","type","startsWith","processImageFile","processVideoFile","Promise","all","generateAsync","then","content","resolve","canvas","document","createElement","context","getContext","image","Image","src","URL","createObjectURL","onload","width","height","fillStyle","fillRect","drawImage","toBlob","blob","name","reject","formData","FormData","append","post","headers","responseType","response","newFilename","newBlob","Blob","data","catch","error","console","Container","children","Title","InputSection","htmlFor","id","onChange","multiple","accept","PreviewSection","index","ImagePreview","alt","style","border","VideoPreview","controls","DownloadButton","onClick","div","h1","button"],"sources":["/Users/charleshuynh/Desktop/video-processing-server/border-tool/src/App.js"],"sourcesContent":["import React, { useState } from 'react'\nimport styled from 'styled-components'\nimport JSZip from 'jszip'\nimport { saveAs } from 'file-saver'\nimport axios from 'axios'\n\nconst App = () => {\n  const [files, setFiles] = useState([])\n  const [borderColor, setBorderColor] = useState('#000000')\n  const [borderWidth, setBorderWidth] = useState(5)\n\n  const handleFileChange = (event) => {\n    const uploadedFiles = Array.from(event.target.files)\n    setFiles(uploadedFiles)\n  }\n\n  const handleBorderColorChange = (e) => {\n    setBorderColor(e.target.value)\n  }\n\n  const handleBorderWidthChange = (e) => {\n    setBorderWidth(Number(e.target.value))\n  }\n\n  const handleDownloadZip = async () => {\n    const zip = new JSZip()\n\n    const filePromises = files.map((file) => {\n      if (file.type.startsWith('image')) {\n        return processImageFile(file, zip)\n      } else if (file.type.startsWith('video')) {\n        return processVideoFile(file, zip)\n      }\n    })\n\n    await Promise.all(filePromises)\n\n    zip.generateAsync({ type: 'blob' }).then((content) => {\n      saveAs(content, 'files.zip')\n    })\n  }\n\n  const processImageFile = (file, zip) => {\n    return new Promise((resolve) => {\n      const canvas = document.createElement('canvas')\n      const context = canvas.getContext('2d')\n      const image = new Image()\n      image.src = URL.createObjectURL(file)\n\n      image.onload = () => {\n        canvas.width = image.width + 2 * borderWidth\n        canvas.height = image.height + 2 * borderWidth\n        context.fillStyle = borderColor\n        context.fillRect(0, 0, canvas.width, canvas.height)\n        context.drawImage(image, borderWidth, borderWidth)\n        canvas.toBlob((blob) => {\n          zip.file(file.name, blob)\n          resolve()\n        })\n      }\n    })\n  }\n\n  const processVideoFile = (file, zip) => {\n    return new Promise((resolve, reject) => {\n      const formData = new FormData()\n      formData.append('video', file)\n\n      axios\n        .post('http://localhost:3000/upload', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n          responseType: 'blob',\n        })\n        .then((response) => {\n          const newFilename = `${file.name}_bordered.mp4`\n          const newBlob = new Blob([response.data], { type: 'video/mp4' })\n          zip.file(newFilename, newBlob)\n          resolve()\n        })\n        .catch((error) => {\n          console.error('Error uploading video:', error)\n          reject(error)\n        })\n    })\n  }\n\n  return (\n    <Container>\n      <Title>Border Tool for Images & Videos</Title>\n\n      <InputSection>\n        <label htmlFor='file-upload'>Upload Images/Videos:</label>\n        <input type='file' id='file-upload' onChange={handleFileChange} multiple accept='image/*,video/*' />\n\n        <label htmlFor='border-color'>Border Color:</label>\n        <input type='color' id='border-color' value={borderColor} onChange={handleBorderColorChange} />\n\n        <label htmlFor='border-width'>Border Width (px):</label>\n        <input type='number' id='border-width' value={borderWidth} onChange={handleBorderWidthChange} />\n      </InputSection>\n\n      <PreviewSection>\n        {files.map((file, index) => {\n          if (file.type.startsWith('image')) {\n            return (\n              <ImagePreview key={index}>\n                <img src={URL.createObjectURL(file)} alt={file.name} style={{ border: `${borderWidth}px solid ${borderColor}` }} />\n              </ImagePreview>\n            )\n          } else if (file.type.startsWith('video')) {\n            return (\n              <VideoPreview key={index}>\n                <video src={URL.createObjectURL(file)} controls style={{ border: `${borderWidth}px solid ${borderColor}` }}></video>\n              </VideoPreview>\n            )\n          } else {\n            return null\n          }\n        })}\n      </PreviewSection>\n\n      <DownloadButton onClick={handleDownloadZip}>Download All as ZIP</DownloadButton>\n    </Container>\n  )\n}\n\nexport default App\n\n// Styled components\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  font-family: Arial, sans-serif;\n`\n\nconst Title = styled.h1`\n  font-size: 2em;\n  margin-bottom: 20px;\n`\n\nconst InputSection = styled.div`\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n\n  input {\n    padding: 5px;\n    font-size: 1em;\n  }\n`\n\nconst PreviewSection = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-bottom: 20px;\n`\n\nconst ImagePreview = styled.div`\n  img {\n    max-width: 200px;\n    max-height: 200px;\n  }\n`\n\nconst VideoPreview = styled.div`\n  video {\n    max-width: 200px;\n    max-height: 200px;\n  }\n`\n\nconst DownloadButton = styled.button`\n  padding: 10px 20px;\n  font-size: 1.2em;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  cursor: pointer;\n  border-radius: 5px;\n\n  &:hover {\n    background-color: #0056b3;\n  }\n`\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}